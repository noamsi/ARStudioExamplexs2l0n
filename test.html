<html>
  <body>
    <div id="theater">
      <div id="start" style="border-radius: 30px; background: red; width: 30px; height: 30px; position: absolute;"></div>
      <video id="video" controls="false" style="visibility: hidden; height: 0;"></video>
      <canvas id="canvas"></canvas>
      <label>
        <br />Try to play me44 :)
      </label>
      <br />
    </div>
    
    <script>
      const constraints = {
        video: true,
      };

      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      const video = document.getElementById('video');
      const startBtn = document.getElementById('start');
      
      startBtn.onclick = () => {
        navigator.mediaDevices.getUserMedia(constraints).then((stream) => {
          video.srcObject = stream;
        });

        // set canvas size = video size when known
        video.addEventListener('loadedmetadata', function() {
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
        });

        video.addEventListener('play', function() {
          var $this = this; //cache
          (function loop() {
            if (!$this.paused && !$this.ended) {
              ctx.drawImage($this, 0, 0);
              setTimeout(loop, 1000 / 30); // drawing at 30fps
            }
          })();
        }, 0);
        
        video.play()

      }
    </script>
  </body>
</html>
