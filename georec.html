<!doctype html>
<html>
    <head>
        <script>
            const updatePostion = callback => {
                navigator.geolocation.getCurrentPosition((position) => {
                    document.querySelector('#content').innerText = `latitude: ${position.coords.latitude}; longitude: ${position.coords.longitude};`
                    callback && callback()
                });
            }
            
            const execPositionLoop = () => {
                updatePostion(() => {
                    setTimeout(execPositionLoop, 500)
                });
            }
            
            const handleOrientationEvent = event => {
                // alpha: rotation around z-axis
                var rotateDegrees = event.alpha;
                // gamma: left to right
                var leftToRight = event.gamma;
                // beta: front back motion
                var frontToBack = event.beta;

                document.querySelector('#orientation').innerText = `rotateDegrees: ${rotateDegrees}; leftToRight: ${leftToRight}; frontToBack: ${frontToBack}`
                updatePostion()
            }
            
            const handleMotionEvent = event => {
                var x = event.accelerationIncludingGravity.x;
                var y = event.accelerationIncludingGravity.y;
                var z = event.accelerationIncludingGravity.z;

                document.querySelector('#motion').innerText = `x: ${x}; y: ${y}; z: ${z}`
                updatePostion()
            }


            window.onload = () => {
                //execPositionLoop()
                window.addEventListener("devicemotion", handleMotionEvent, true);
                window.addEventListener("deviceorientation", handleOrientationEvent, true);
            }
        </script>
  </head>

    <body style="margin: 0; overflow: hidden;">
      <div id="content"></div>
      <div id="motion"></div>
      <div id="orientation"></div>
    </body>
</html>
